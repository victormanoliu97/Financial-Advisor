<div class="container">
  <div class="sidebar">
    <ul>
      <li class="logo">
        <a href="#">
          <img src="https://cdn4.iconfinder.com/data/icons/top-search-3/128/_Bank_bank_account_banking_-128.png"/>
        </a>
      <li>
      <li class="current">
        <a href="#">Home</a>
      </li>

      <li class="admin">
        <a href="#" title="admin-only" class="tooltip-right"
           data-tooltip="Only available when you completed all the profiling sections"><span class="lock"></span> My
          Objectives</a>
      </li>

      <li class="spacer">Profiling
        <div class="hr"></div>
      </li>
      <li class="has-children">
        <a href="#">Fill your profile</a>
        <ul class="sub-menu">
          <li>
            <a href="#">General profiling</a>
          </li>
          <li>
            <a href="/income">Incomes/Liabilities</a>
          </li>
          <li>
            <a href="/estates">Estates/Companies</a>
          </li>
        </ul>
      </li>

      <li class="spacer">Statistics
        <div class="hr"></div>
      </li>
      <li class="has-children">
        <a href="#">Review Account Statistics</a>
      </li>
      <li class="has-children">
      </li>
      <li class="has-children">
        <a href="#">Financial Instruments</a>
        <ul class="sub-menu">
          <li>
            <a href="#">Stocks</a>
          </li>
          <li>
            <a href="#">Forex</a>
          </li>
          <li>
            <a href="#">Cryptocurrencies</a>
          </li>
        </ul>
      </li>
      <li class="spacer">
        <div class="hr"></div>
      </li>
      <li>
        <a href="#" class="tooltip-right" data-tooltip="Ready to leave? :(">Logout</a>
      </li>
    </ul>
  </div>
  <div class="content">
    <div class="header">
      <span class="label"><strong><a>{{loggedUserName}}</a></strong></span>
      <span class="pipe"></span>
      &nbsp;<span class="label">Dashboard</span>
      <div class="menu">
        <a class="faux wiggle-bug tooltip-bottom" data-tooltip="Report Bugs or Concerns." title="Report a Bug"><span
          class="bug"></span></a>
        <a>Support</a>
      </div>
    </div>
    <div class="main">
      <div class="widget totals">
        <h4 class="widget-title"><span data-tooltip="Analytical information about your profiling completion.">Profiling Completion Analysis</span>
          <a href="#" class="tooltip-left button" data-tooltip="Attempt to reload Analytical data.">Reload Data</a></h4>
        <div class="widget-content text-center">
          <div class="chart quarter">
            <span class="label">General</span><br/><br/>
            <h2>0%</h2>
          </div>
          <div class="chart quarter">
            <span class="label">Incomes/Liabilities</span><br/><br/>
            <h2>0%</h2>
          </div>
          <div class="chart quarter">
            <span class="label">Real Estates</span>
            <br/><br/>
            <h2>0%</h2>
          </div>
          <div class="chart quarter">
            <span class="label">Companies</span><br/><br/>
            <h2>0%</h2>
          </div>
        </div>
      </div>

      <ngb-tabset>
        <ngb-tab title="Estates">
          <ng-template ngbTabContent>
            <ngb-accordion [closeOthers]="true" activeIds="static-1">
              <ng-container *ngFor="let index of estates">
                <ngb-panel id="static-1" type="secondary">

                  <ng-template ngbPanelTitle>
                    <div class="d-flex justify-content-between">
                      <div class="d-flex p-2" style="font-weight: bold; color: #1c2128;">{{index.estateName}}</div>
                      <div class="d-flex p-2"><i class="material-icons">arrow_drop_down</i></div>
                    </div>
                  </ng-template>
                  <ng-template ngbPanelContent>
                    <!-- Estate Name !-->
                    <div class="md-form form-group mt-5">
                      <label for="estateName">Estate Name *</label>
                      <input type="text" class="form-control" id="estateName" ngModel="{{index.estateName}}" [(ngModel)]="estateName"  />
                    </div>

                    <!-- Estate Description !-->
                    <div class="md-form form-group mt-5">
                      <label for="estateDescription">Estate Description</label>
                      <input type="text" class="form-control" id="estateDescription" ngModel="{{index.estateDescription}}"
                             [(ngModel)]="estateDescription">
                    </div>

                    <!-- Estate Type !-->
                    <div class="md-form form-group mt-5">
                      <label for="estateType">Estate Type *</label>
                      <input type="text" class="form-control" id="estateType" ngModel="{{index.estateType}}"
                             [(ngModel)]="estateType">
                    </div>

                    <!-- Estate Value !-->
                    <div class="md-form form-group mt-5">
                      <label for="estateValue">Estate Value *</label>
                      <input type="text" class="form-control" id="estateValue" ngModel="{{index.estateValue}}"
                             [(ngModel)]="estateValue" onkeyup="this.value=this.value.replace(/[^\d]/,'')">
                    </div>

                    <br>
                    <ngb-alert *ngIf="updateEstateRequestResponse.responseCode == 200" type="success"
                               (close)="updateEstateRequestResponse.responseCode = 0">  {{requestResponseMessage}} </ngb-alert>
                    <ngb-alert
                      *ngIf="updateEstateRequestResponse.responseCode != 200 && updateEstateRequestResponse.responseCode > 0"
                      type="danger"
                      (close)="updateEstateRequestResponse.responseCode = 0">  {{requestResponseMessage}} </ngb-alert>

                    <button class="btn btn-success" style="width: 40%; float:left"
                            (click)="updateEstate(index.estateId)"><i class="fa fa-save"></i>
                    </button>
                    <button class="btn btn-danger" style="width: 40%; float:right" (click)="open(delete_estate_content)"><i class="fa fa-trash"></i>
                    </button>

                  </ng-template>

                </ngb-panel>

                <ng-template #delete_estate_content let-modal>
                  <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Delete Income</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="form-group">
                      <div class="input-group">
                        <h3>Are you sure you want to delete this estate?</h3>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-danger" style="width: 100%;"
                            (click)="deleteEstate(index.estateId)"><i class="fa fa-trash"></i>
                    </button>
                  </div>
                </ng-template>

              </ng-container>
            </ngb-accordion>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="Companies">
          <ng-template ngbTabContent>
            <ngb-accordion [closeOthers]="true" activeIds="static-1">
              <ng-container *ngFor="let index of companies">
                <ngb-panel id="static-70" type="secondary">
                  <ng-template ngbPanelTitle>
                    <div class="d-flex justify-content-between">
                      <div class="d-flex p-2" style="font-weight: bold; color: #1c2128;">{{index.companyName}}</div>
                      <div class="d-flex p-2"><i class="material-icons">arrow_drop_down</i></div>
                    </div>
                  </ng-template>

                  <ng-template ngbPanelContent>
                    <!-- Company Name -->
                    <div class="md-form form-group mt-5">
                      <label for="companyName">Company Name *</label>
                      <input type="text" class="form-control" id="companyName" ngModel="{{index.companyName}}" [(ngModel)]="companyName">
                    </div>

                    <!-- Company Description -->
                    <div class="md-form form-group mt-5">
                      <label for="companyDescription">Company Description</label>
                      <input type="text" class="form-control" id="companyDescription" ngModel="{{index.companyDescription}}" [(ngModel)]="companyDescription">
                    </div>

                    <!-- Company Type -->
                    <div class="md-form form-group mt-5">
                      <label for="companyType">Company Type</label>
                      <input type="text" class="form-control" id="companyType" ngModel="{{index.companyType}}" [(ngModel)]="companyType">
                    </div>

                    <!-- Company Revenue -->
                    <div class="md-form form-group mt-5">
                      <label for="companyRevenue">Company Revenue</label>
                      <input type="text" class="form-control" id="companyRevenue" ngModel="{{index.companyRevenue}}" [(ngModel)]="companyRevenue" onkeyup="this.value=this.value.replace(/[^\d]/,'')">
                    </div>

                    <br>
                    <ngb-alert *ngIf="updateCompanyRequestResponse.responseCode == 200" type="success"
                               (close)="updateCompanyRequestResponse.responseCode = 0">  {{requestResponseMessage}} </ngb-alert>
                    <ngb-alert
                      *ngIf="updateCompanyRequestResponse.responseCode != 200 && updateCompanyRequestResponse.responseCode > 0"
                      type="danger"
                      (close)="updateCompanyRequestResponse.responseCode = 0">  {{requestResponseMessage}} </ngb-alert>

                    <button class="btn btn-success" style="width: 40%; float:left"
                            (click)="updateCompany(index.idCompany)"><i class="fa fa-save"></i>
                    </button>
                    <button class="btn btn-danger" style="width: 40%; float:right" (click)="open(delete_company_content)"><i class="fa fa-trash"></i>
                    </button>

                  </ng-template>
                </ngb-panel>

                <ng-template #delete_company_content let-modal>
                  <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title-company">Delete Company</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="form-group">
                      <div class="input-group">
                        <h3>Are you sure you want to delete this company?</h3>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-danger" style="width: 100%;"
                            (click)="deleteCompany(index.idCompany)"><i class="fa fa-trash"></i>
                    </button>
                  </div>
                </ng-template>

              </ng-container>
            </ngb-accordion>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="Add Estate/Company">
          <ng-template ngbTabContent>
            <br>
            <button type="button" (click)="open(add_estate)" class="btn btn-primary"><i class="fa fa-plus"> Add Estate</i></button>
            <br>
            <br>
            <button type="button" (click)="open(add_company)" class="btn btn-primary"><i class="fa fa-plus"> Add Company</i></button>
          </ng-template>

          <ng-template #add_company let-modal>
            <div class="modal-header">
              <h4 class="modal-title" id="modal-basic-add">Add Company</h4>
              <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <div class="modal-body">
              <div class="form-group">
                <!-- Company Name -->
                <div class="md-form form-group mt-5">
                  <label for="companyName">Company Name *</label>
                  <input type="text" class="form-control" id="companyNameAdd" [(ngModel)]="companyName">
                </div>

                <!-- Company Description -->
                <div class="md-form form-group mt-5">
                  <label for="companyDescription">Company Description</label>
                  <input type="text" class="form-control" id="companyDescriptionAdd" [(ngModel)]="companyDescription">
                </div>

                <!-- Company Type -->
                <div class="md-form form-group mt-5">
                  <label for="companyType">Company Type</label>
                  <input type="text" class="form-control" id="companyTypeAdd"[(ngModel)]="companyType">
                </div>

                <!-- Company Revenue -->
                <div class="md-form form-group mt-5">
                  <label for="companyRevenue">Company Revenue</label>
                  <input type="text" class="form-control" id="companyRevenueAdd" [(ngModel)]="companyRevenue" onkeyup="this.value=this.value.replace(/[^\d]/,'')">
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-success" style="width: 100%;"
                      (click)="addCompany()"><i class="fa fa-save"></i>
              </button>
            </div>

            <ngb-alert
              *ngIf="addCompanyRequestResponse.responseCode != 200 && addCompanyRequestResponse.responseCode > 0"
              type="danger"
              (close)="addCompanyRequestResponse.responseCode = 0">  {{requestResponseMessage}} </ngb-alert>
          </ng-template>

          <ng-template #add_estate let-modal>
            <div class="modal-header">
              <h4 class="modal-title" id="modal-basic-add-liability">Add Liability</h4>
              <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <div class="modal-body">
              <div class="form-group">

                <!-- Estate Name !-->
                <div class="md-form form-group mt-5">
                  <label for="estateName">Estate Name *</label>
                  <input type="text" class="form-control" id="estateNameAdd" [(ngModel)]="estateName"  />
                </div>

                <!-- Estate Description !-->
                <div class="md-form form-group mt-5">
                  <label for="estateDescription">Estate Description</label>
                  <input type="text" class="form-control" id="estateDescriptionAdd"
                         [(ngModel)]="estateDescription">
                </div>

                <!-- Estate Type !-->
                <div class="md-form form-group mt-5">
                  <label for="estateType">Estate Type *</label>
                  <input type="text" class="form-control" id="estateTypeAdd"
                         [(ngModel)]="estateType">
                </div>

                <!-- Estate Value !-->
                <div class="md-form form-group mt-5">
                  <label for="estateValue">Estate Value *</label>
                  <input type="text" class="form-control" id="estateValueAdd"
                         [(ngModel)]="estateValue" onkeyup="this.value=this.value.replace(/[^\d]/,'')">
                </div>

              </div>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-success" style="width: 100%;"
                      (click)="addEstate()"><i class="fa fa-save"></i>
              </button>
            </div>

            <ngb-alert
              *ngIf="addEstateRequestResponse.responseCode != 200 && addEstateRequestResponse.responseCode > 0"
              type="danger"
              (close)="addEstateRequestResponse.responseCode = 0">  {{requestResponseMessage}} </ngb-alert>
          </ng-template>

        </ngb-tab>

      </ngb-tabset>
    </div>
  </div>
</div>
